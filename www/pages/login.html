<!DOCTYPE html>
<html>

<head>
    <!--<meta name="format-detection" content="telephone=no">-->
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <script src="../js/libs/jquery-3.1.1.min.js"></script>
    <script src="../js/libs/popper.min.js"></script>
    <script src="../js/libs/bootstrap.min.js"></script>
    <script type="text/javascript" src="../cordova.js"></script>
    <script type="text/javascript" src="../js/index.js"></script>
    <title>CEOSim</title>
</head>

<body id="body" onload="Loaded()">
    <button class=" ml-2 mt-2 btn btn-azul" onclick="backbutton()" id="access">
        <i class="fa fa-chevron-left p-1" aria-hidden="true"></i>
    </button>
    <div class="container pt-3" id="login">
        <div class="">
            <img class="mt-3 mb-4 img-center w-100" src="../img/logosf.png">

            <div id="errorlog" style="display:none">
                <p class="txt-rojo text-center">Usuario o Contrase単a incorrecto</p>
            </div>
            <div class="form-group">
                <label class="form-control-label" id="messageEmail"></label>
                <input type="email" class="form-control" id="exampleInputEmail" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{1,63}$"
                    placeholder="Ingrese su correo" minlength="10" value="m.pinilla03@ufromail.cl">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="exampleInputPassword" pattern="[A-Za-z0-9]{6,50}" placeholder="Ingrese Constrase単a"
                    minlength="6" value="12345">
            </div>
            <button id="acceder" class="btn btn-verde" onclick="login()" style="width: 100%;" disabled="true">Acceder</button>
            <div class="divider"></div>
            <label class="form-check-label">
                <a href="#" onclick="gotoreset()"> Recuperar contrase単a</a>
            </label>
        </div>
    </div>
</body>
<script>

    var email = false, pass = false;
    function Loaded() {
        if (vEmail(localStorage.email)) {
            email = true;
            $('#exampleInputEmail').val(localStorage.email);
            document.getElementById("messageEmail").innerHTML = "";
            $('#exampleInputEmail').removeClass("form-control-danger").addClass("form-control-success");
            $('#exampleInputEmail').parent().removeClass('has-danger').addClass("has-success");
            validarLogin();
        }
    }
    validarLogin();
    $('#exampleInputEmail').on('keyup', function () {
        if (this.checkValidity() && $(this).val().length > 0) {
            email = true;
            document.getElementById("messageEmail").innerHTML = "";
            $(this).removeClass("form-control-danger").addClass("form-control-success");
            $(this).parent().removeClass('has-danger').addClass("has-success");
            validarLogin();
        }
        else {
            email = false;
            document.getElementById("messageEmail").innerHTML = "Correo Invalido";
            $(this).removeClass("form-control-success").addClass("form-control-danger");
            $(this).parent().removeClass('has-success').addClass("has-danger");
        }
    });
    $('#exampleInputPassword').on('keyup', function () {
        if (this.checkValidity() && $(this).val().length > 5) {
            pass = true;
            document.getElementById("messageEmail").innerHTML = "";
            $(this).removeClass("form-control-danger").addClass("form-control-success");
            $(this).parent().removeClass('has-danger').addClass("has-success");
            validarLogin();
        }
        else {
            pass = false;
            document.getElementById("messageEmail").innerHTML = "Contrase単a Invalida";
            $(this).removeClass("form-control-success").addClass("form-control-danger");
            $(this).parent().removeClass('has-success').addClass("has-danger");
        }
    });

    function validarLogin() {
        if (email == true && pass == true) {
            document.getElementById('acceder').disabled = false;
        } else {
            document.getElementById('acceder').disabled = true;
        }
    }
</script>

</html>